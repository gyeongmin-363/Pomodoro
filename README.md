# ☕ 뽀모도로 × 디지털 스터디 카페

## 1. 핵심 컨셉
- **목표:** '음악 보상' 대신 '가벼운 사회적 존재감(Light Social Presence)'을 제공하여 동기를 부여합니다.
- **방식:** 사용자는 아이템을 해금하는 대신, 테마가 있는 '스터디 룸'에 참여합니다.
- **경험:**
    - "비 오는 카페", "조용한 도서관", "모닥불 ASMR" 등 다양한 테마의 룸 제공.
    - 각 룸은 고유의 앰비언트 사운드(ASMR/배경음악)와 비주얼을 가짐.
    - 사용자는 타이머를 실행하며 다른 사람들과 '함께' 집중하고 있다는 감각을 느낌.
- **교류 (압박 없는 방식):** 채팅이나 능동적 리액션을 완전히 제거하고, 오직 '존재'와 '성과'만 자동으로 공유합니다.
    - "현재 12명이 이 룸에서 집중 중" 카운터.
    - "🎉 OOO님이 1세션을 완료했습니다!" (자동 알림)

---

## 2. 사용자 흐름 (집중 루프)
1. **[탐색]** 사용자가 '스터디 카페' 탭에 진입합니다.
2. **[선택]** 다양한 테마 룸(공개) 리스트를 확인합니다. 각 룸에는 테마명, 배경 사운드 미리듣기, 실시간 접속 인원("N명 집중 중")이 표시됩니다.
3. **[입장]** 원하는 룸을 선택해 입장합니다. 즉시 해당 룸의 앰비언트 사운드가 재생됩니다.
4. **[집중]** 중앙의 뽀모도로 타이머를 시작합니다.
5. **[상호작용 (수동)]** 집중 중, 다른 사용자의 세션 완료 알림("🎉 OOO님 완료!")을 수신합니다.
6. **[완료]** 내 세션(예: 25분)이 종료되면, 룸에 있는 다른 사람들에게 "🎉 [내 닉네임]님이 1세션을 완료했습니다!" 알림이 자동으로 전송됩니다.
7. **[휴식]** 휴식 시간이 시작되며, 다른 사람들의 집중 현황을 보며 잠시 휴식합니다.

---

## 3. 기능 요약

### ☕ 스터디 룸 (공개형)
- **테마:** 각 룸은 고유한 이름, 배경 이미지/애니메이션, 앰비언트 사운드를 가집니다.
- **접근성:** 누구나 자유롭게 입장 및 퇴장할 수 있습니다.
- **사운드:** 룸 입장 시 앰비언트 사운드가 자동 재생/루프됩니다.

### 👥 실시간 상호작용 (서버리스 - Supabase Realtime)
- **실시간 접속 인원 (Presence):**
    - "현재 N명 집중 중" 카운터를 `Presence` 기능으로 구현합니다.
    - 사용자의 상태('집중', '휴식')를 실시간으로 공유합니다.
- **세션 완료 알림 (Broadcast):**
    - 사용자가 뽀모도로 세션을 완료하면, `Broadcast`를 통해 룸 전체에 축하 알림을 자동으로 보냅니다. (사용자 개입 없음)

### ⏲️ 뽀모도로 타이머
- **개인 타이머:** 룸 안에서 개인의 뽀모도로 타이머(집중/휴식)를 작동시킵니다.
- **상태 연동:** 타이머의 상태('집중', '휴식')가 `Presence`를 통해 룸에 공유될 수 있습니다. (예: "집중 8명 / 휴식 2명")

### 📊 개인 통계
- 기존 README의 '별자리' 컨셉을 '캘린더/통계'로 대체합니다.
- 개인의 일별/주별/월별 집중 시간을 기록하고 시각화합니다. (기존 StatsScreen 기능 활용)

---

## 4. 장점
- **극도의 단순함:** 사용자는 룸을 선택하고 타이머를 시작하는 것 외에 아무것도 할 필요가 없습니다.
- **높은 동기부여:** '함께하고 있다'는 느낌(Social Presence)과 타인의 '완료' 알림 자체가 강력한 동기부여가 됩니다.
- **모던한 경험:** 미니멀한 UI와 즉각적인 실시간 반응으로 세련된 앱 경험을 제공합니다.
- **긍정적 교류:** 경쟁이나 부담스러운 소통을 원천 차단하고, 긍정적인 '성과 공유'만으로 분위기를 만듭니다.
- **서버리스 구현:** Supabase Realtime (`Presence`, `Broadcast`)을 활용하여 별도 서버 관리 없이 모든 실시간 기능을 구현할 수 있습니다.

---

## 5. 디자인 및 UI/UX 원칙 (모던 리디자인)

현재의 픽셀(레트로) 디자인은 '디지털 스터디 카페'의 모던한 컨셉과 충돌합니다. **'클린 & 미니멀리즘'**을 원칙으로 하여 사용자의 집중에 방해가 되지 않는 세련된 디자인으로 변경합니다.

### A. 타이포그래피 (Typography)
- **제거:** 가독성이 낮은 픽셀 폰트(`neo_dunggeunmo_pro_regular.ttf`)를 프로젝트에서 완전히 제거합니다.
- **적용:** 안드로이드 시스템 기본 폰트(`FontFamily.Default`)를 사용하거나, `Pretendard` / `SUIT` 같이 가독성 높은 모던 한글 폰트를 도입합니다.

### B. 컴포넌트 (Components)
- **제거:** `PixelSwitch.kt`, `PixelArtConfirmDialog.kt` 등 직접 구현된 픽셀 아트 컴포넌트를 모두 제거합니다.
- **적용:** Jetpack Compose Material 3 (`androidx.compose.material3`)의 표준 컴포넌트(`Switch`, `AlertDialog`, `Button` 등)를 전면 사용합니다. 이를 통해 앱 전체의 디자인 일관성을 확보하고 자연스러운 애니메이션을 적용합니다.

### C. 색상 팔레트 (Color Palette)
- **기본 배경:** 눈이 편안하도록 완전한 흰색/검은색 대신 **Off-white** (밝은 모드)와 **Dark Gray/Navy** (어두운 모드)를 사용합니다.
- **주요 색상 (Primary):** 채도가 높은 원색을 피하고, 차분하고 집중을 돕는 색상(예: **Muted Blue**, **Deep Green**, **Warm Gray**) 1~2개를 포인트로 사용합니다.
- **테마 적용:** 룸 테마(예: '비 오는 날')는 UI 컴포넌트의 색상을 바꾸는 것이 아니라, **배경 비주얼(이미지/애니메이션)로만** 은은하게 표현합니다. UI 컨트롤(버튼, 타이머)은 일관된 테마 색상을 유지합니다.

### D. 레이아웃 (Layout)
- **여백 (Whitespace):** UI 요소(버튼, 텍스트, 카드) 사이에 충분한 여백(Padding, Margin)을 확보하여 시각적 안정감과 고급스러움을 줍니다.

---

## 6. 개발 로드맵 및 체크리스트

### ✅ v1.0 (MVP): 핵심 카페 경험 및 모던 리디자인

- **뽀모도로 타이머 기능 (기존 활용)**
    - [x] 집중 / 휴식 / 긴 휴식 타이머 로직 (`TimerService.kt`)
    - [x] 타이머 UI 및 컨트롤 (시작, 정지, 재설정) (`MainScreen.kt`)
- **디자인 시스템 리팩토링 (신규/최우선)**
    - [x] `Type.kt`: 픽셀 폰트(`neo_dunggeunmo_pro`) 제거 및 시스템 기본 폰트(또는 Pretendard)로 교체
    - [x] `Color.kt`: 모던한 앱 컨셉에 맞게 Primary/Secondary 색상을 차분한 톤(예: Muted Blue, Gray 계열)으로 재정의
    - [x] `PixelSwitch.kt` 사용처를 Material 3 `Switch`로 전면 교체
    - [x] `PixelArtConfirmDialog.kt` 사용처를 Material 3 `AlertDialog`로 전면 교체
    - [x] 전반적인 레이아웃 리팩토링 (충분한 여백 확보)
- **스터디 카페 UI (신규)**
    - [ ] '스터디 카페' 메인 화면 (하단 탭 메뉴 추가)
    - [ ] 공개 룸 리스트 UI (카드 형태, 룸 이름, 테마 이미지 표시)
    - [ ] 룸 상세(입장) 화면 UI (배경 이미지/비주얼, 타이머 표시)
- **핵심 룸 기능 (신규)**
    - [ ] 3~4개의 기본 공개 룸 데이터 (이름, 이미지 경로, 사운드 파일 경로)
    - [ ] 룸 입장 시 앰비언트 사운드 재생 기능 (`SoundPlayer.kt` 확장)
- **실시간 기능 (Supabase - Presence)**
    - [ ] `SupabaseProvider`에 Realtime 채널 연결 로직 추가
    - [ ] 룸 입장 시 Realtime 채널 `join` 및 `Presence` 상태 등록
    - [ ] 룸 퇴장 시 채널 `leave`
    - [ ] `Presence` 상태를 구독하여 "N명 집중 중" 카운터 UI에 표시
- **개인 통계 (기존 활용)**
    - [x] 세션 완료 시 개인 통계 기록
    - [x] 캘린더 및 차트 UI (`StatsScreen.kt`)

### ✅ v1.1: 실시간 알림 및 고도화

- **실시간 기능 (Supabase - Broadcast)**
    - [ ] 뽀모도로 세션 완료 시, `Broadcast`로 "OOO님 1세션 완료!" 이벤트 전송
    - [ ] 룸에 있는 다른 사용자들이 이 완료 이벤트를 수신하여 화면에 알림(Toast/Snackbar) 표시
- **UI/UX 개선**
    - [ ] "N명 집중 중"을 "집중 N명 / 휴식 M명"으로 고도화 (Presence 상태 활용)
    - [ ] 룸 상세 화면에 현재 접속 중인 사용자 목록(간단한 닉네임 리스트) 표시

### ✅ v1.2: 그룹 기능 확장

- **비공개 스터디 룸 (기존 기능 통합)**
    - [ ] (기존 `StudyRoomRepository` 활용) '스터디 카페' 탭에 '비공개 룸 만들기/참여하기' 기능 추가
    - [ ] 비공개 룸도 v1.1의 실시간 상호작용(Presence, Broadcast)을 동일하게 지원하도록 연동
- **포커스 트레인 (Focus Train) (신규)**
    - [ ] '동기화 타이머 룸' 타입 기획
    - [ ] 서버 시간(또는 특정 기준)에 맞춰 모든 참여자의 타이머가 동기화되는 로직 구현
    - [ ] 동기화 룸 UI (개인 제어 버튼 비활성화, 남은 시간만 표시)

### 🚀 v1.3+ (확장 아이디어)

- [ ] 룸 테마 추가 (신규 사운드, 비주얼)
- [ ] 앰비언트 사운드 믹서 기능 (예: 비 소리 + 재즈 음악)
- [ ] 주간 인기 룸 랭킹
